<!DOCTYPE html>
<html lang="de">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Bewertung</title>
 <style>
 body {
 border: 2px solid #98b36a;
 margin-left: 10%;
 margin-right: 10%;
 }
 h1 {
 text-align: center;
 color: #228f5c;
 }
 table {
 text-align: center;
 }
 .bewertungen th, td {
 border: 1px solid black;
 }
 .bewertungen>table img {
 float: left;
 }

 form {
 margin: 5%;
 padding-left: 10%;
 padding-right: 10%;
 }
 label {
 font-size: 25px;
 }
 textarea, select {
 width: 100%;
 font-size: 20px;
 margin-top: 10px;
 margin-bottom: 10px;
 border-radius: 10px;
 }
 button {
 border-radius: 10px;
 border: 1px solid green;
 margin-top: 20px;
 margin-left: 40%;
 width: 20%;
 height: 30px;
 }
 button:hover {
 color: white;
 background-color: #499773;
 }
 .error {
 color: red;
 font-size: 1em;
 text-align: center;
 }
 img {
 max-height: 20%;
 max-width: 20%;
 padding-left: 40%;
 }
 .hervorgehoben {
 background-color: #76a676;
 }
 /* Für kleinere Bildschirme (bis 600px) Flexbox nebeneinander */
 @media (max-width: 600px) {
 form {
 display: flex;
 flex-direction: row;
 justify-content: space-between;
 align-items: center;
 }

 label {
 width: 25%;
 text-align: right;
 }

 textarea,
 select {
 width: 70%;
 }

 button {
 margin-left: 0;
 width: 15%;
 }
 }
 </style>
</head>
<body>
<h1>Bewertung eingeben</h1>
<img src="/img/gerichte/<?php echo \htmlentities($bildname ?? '00_image_missing.jpg'??'', ENT_QUOTES, 'UTF-8', false); ?>" alt="<?php echo \htmlentities($bildname??'', ENT_QUOTES, 'UTF-8', false); ?>">
<?php if(!isset($error)||$error !== ''): ?>
 <p class="error"><?php echo \htmlentities($error??'', ENT_QUOTES, 'UTF-8', false); ?></p>
<?php endif; ?>
<form action="/bewertung_action" method="POST">
 <!-- Bemerkung -->
 <label for="bemerkung">Bemerkung:</label>
 <textarea id="bemerkung" name="bemerkung" minlength="5" required></textarea>
 <!-- Sterne-Bewertung -->
 <label for="bewertung">Bewertung:</label>
 <select id="bewertung" name="bewertung" required>
 <option value="" disabled selected>Bitte eine Bewertung auswählen</option>
 <option value="sehr gut">Sehr gut</option>
 <option value="gut">Gut</option>
 <option value="schlecht">Schlecht</option>
 <option value="sehr schlecht">Sehr schlecht</option>
 </select>
 <!-- Absendebutton -->
 <button type="submit" name="submitted" value="true">Abschicken</button>
</form>
<!-- erfassten Bewertungen -->
<div class="bewertungen">
 <table>
 <thead>
 <tr>
 <th>Gericht</th>
 <th>Bemerkung</th>
 <th>Sterne-Bewertung</th>
 <th>Bewertungsdatum</th>
 <?php if($admin): ?>
 <th>Hervorheben</th>
 <?php endif; ?>
 </tr>
 </thead>
 <tbody>
 <?php $__empty_1 = true; foreach($bewertungen as $bewertung): $__empty_1 = false; ?>
 <tr <?php if($bewertung['Hervorgehoben']): ?>
 class="hervorgehoben"
 <?php endif; ?>
 >
 <td><img src="/img/gerichte/<?php echo \htmlentities($bewertung['bildname'] ?? '00_image_missing.jpg'??'', ENT_QUOTES, 'UTF-8', false); ?>" alt="<?php echo \htmlentities($bewertung['gericht_name']??'', ENT_QUOTES, 'UTF-8', false); ?>"><?php echo \htmlentities($bewertung['gericht_name']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities($bewertung['Bemerkung']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities($bewertung['SterneBewertung']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities($bewertung['Bewertungszeitpunkt']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <?php if($admin): ?>
 <td>
 <a href="/updateHervorheben?bewertungID=<?php echo \htmlentities($bewertung['BewertungID']??'', ENT_QUOTES, 'UTF-8', false); ?>"><?php echo \htmlentities($bewertung['Hervorgehoben']? 'Hervorhebung abwählen':'hervorheben'??'', ENT_QUOTES, 'UTF-8', false); ?></a>
 </td>
 <?php endif; ?>
 </tr>
 <?php endforeach; if ($__empty_1): ?>
 <tr>
 <td colspan="4">Keine Bewertung gefunden.</td>
 </tr>
 <?php endif; ?>
 </tbody>
 </table>
</div>
</body>
</html>